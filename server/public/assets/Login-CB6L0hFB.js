import{l as b}from"./users-BqEQ9Ml1.js";import{d as C,r as d,a as k,c as e,w as n,x,f as y,u as R,b as r,e as S,g as f}from"./index-DtDkd7E5.js";const B=C({__name:"Login",setup(h){const u=R(),l=d(),i={labelCol:{span:6},wrapperCol:{span:14}},a=d({username:"",password:""}),_={username:[{required:!0,message:"请输入账号",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]},c=()=>{l.value.validate().then(()=>{b(a.value).then(t=>{t.data.ok===1&&(u.push("/"),localStorage.setItem("user",JSON.stringify(t.data.data[0])))})}).catch(t=>{console.log("error",t)})};return(t,o)=>{const v=r("a-input"),m=r("a-form-item"),g=r("a-input-password"),w=r("a-form"),p=r("a-button");return S(),k("div",null,[e(w,x({ref_key:"formRef",ref:l,model:a.value},i,{rules:_}),{default:n(()=>[e(m,{label:"账号",name:"username"},{default:n(()=>[e(v,{value:a.value.username,"onUpdate:value":o[0]||(o[0]=s=>a.value.username=s)},null,8,["value"])]),_:1}),e(m,{label:"密码",name:"password"},{default:n(()=>[e(g,{value:a.value.password,"onUpdate:value":o[1]||(o[1]=s=>a.value.password=s)},null,8,["value"])]),_:1})]),_:1},16,["model"]),e(p,{type:"primary",onClick:c},{default:n(()=>[f("登录")]),_:1}),e(p,{onClick:o[2]||(o[2]=s=>y(u).push("/Register"))},{default:n(()=>[f("没有账号？去注册→")]),_:1})])}}});export{B as default};
